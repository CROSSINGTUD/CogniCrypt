language: java

jdk:
  - oraclejdk8

env:
  - NIGHTLYBUILD=$BRANCH
  - NIGHTLYBUILD=SICS1718
  
matrix:
  allow_failures:
   - env: NIGHTLYBUILD=SICS1718
  
build:
  ci:
   - git checkout $NIGHTLYBUILD
   - cd mvn-parent
   - mvn clean verify surefire:test --fail-at-end
   
  on_success:
   - if [ "$NIGHTLYBUILD" == "master" ]; then cd ../repository; ./uploadh.sh; fi

