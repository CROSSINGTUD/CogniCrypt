language: java

jdk:
  - oraclejdk8

env:
  - NIGHTLYBUILD=master
  - NIGHTLYBUILD=cp-group1718
  - NIGHTLYBUILD=ti-group1718
  - NIGHTLYBUILD=ui-group1718
  
build:
  ci:
   - git checkout $NIGHTLYBUILD
   - cd mvn-parent
   - mvn clean verify surefire:test
   
  on_success:
   - cp ../target/surefire-reports/*.xml ../shippable/testresults/
   - cd ../shippable/testresults
   
  on_failure:
   - cp ../target/surefire-reports/*.xml ../shippable/testresults/
   - cd ../shippable/testresults